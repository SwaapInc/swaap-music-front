{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports['default'] = reduxReactRouter;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _redux = require('redux');\n\nvar _reactRouter = require('react-router');\n\nvar _reactRouterLibCreateTransitionManager = require('react-router/lib/createTransitionManager');\n\nvar _reactRouterLibCreateTransitionManager2 = _interopRequireDefault(_reactRouterLibCreateTransitionManager);\n\nvar _historyMiddleware = require('./historyMiddleware');\n\nvar _historyMiddleware2 = _interopRequireDefault(_historyMiddleware);\n\nvar _constants = require('./constants');\n\nfunction reduxReactRouter(_ref) {\n  var routes = _ref.routes;\n  var createHistory = _ref.createHistory;\n  var parseQueryString = _ref.parseQueryString;\n  var stringifyQuery = _ref.stringifyQuery;\n  var routerStateSelector = _ref.routerStateSelector;\n  return function (createStore) {\n    return function (reducer, initialState) {\n      var baseCreateHistory = undefined;\n\n      if (typeof createHistory === 'function') {\n        baseCreateHistory = createHistory;\n      } else if (createHistory) {\n        baseCreateHistory = function () {\n          return createHistory;\n        };\n      }\n\n      var createAppHistory = _reactRouter.useRouterHistory(baseCreateHistory);\n\n      var history = createAppHistory({\n        parseQueryString: parseQueryString,\n        stringifyQuery: stringifyQuery\n      });\n\n      var transitionManager = _reactRouterLibCreateTransitionManager2['default'](history, _reactRouter.createRoutes(routes));\n\n      var store = _redux.applyMiddleware(_historyMiddleware2['default'](history))(createStore)(reducer, initialState);\n\n      store.transitionManager = transitionManager;\n      store.history = history;\n      store[_constants.ROUTER_STATE_SELECTOR] = routerStateSelector;\n      return store;\n    };\n  };\n}\n\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}